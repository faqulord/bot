<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dark Tycoon</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- DARK TYCOON DESIGN --- */
        :root { --bg: #0b0b0f; --card: #1c1c24; --accent: #7b2cbf; --gold: #ffcc00; --green: #00ff88; --danger: #ff3366; }
        body { background: var(--bg); color: #fff; font-family: 'Segoe UI', Roboto, sans-serif; margin: 0; padding-bottom: 90px; user-select: none; overflow: hidden; }

        /* HEADER */
        .header { padding: 15px; background: rgba(28,28,36,0.9); display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; }
        .balance-box { display: flex; flex-direction: column; }
        .balance-val { font-size: 20px; font-weight: bold; color: var(--gold); }
        .profit-per-hour { font-size: 11px; color: var(--green); display: flex; align-items: center; gap: 4px; }

        /* F≈ê GOMB */
        .clicker-zone { height: 50vh; display: flex; align-items: center; justify-content: center; position: relative; }
        .main-btn { 
            width: 220px; height: 220px; 
            background: radial-gradient(circle, #3a0ca3, #10002b);
            border: 4px solid var(--accent);
            border-radius: 50%; 
            box-shadow: 0 0 30px var(--accent);
            display: flex; align-items: center; justify-content: center;
            font-size: 50px; cursor: pointer; transition: 0.1s;
        }
        .main-btn:active { transform: scale(0.95); }
        
        /* √öSZ√ì SZ√ÅMOK */
        .float-num { position: absolute; color: #fff; font-weight: bold; font-size: 24px; animation: floatUp 0.8s forwards; pointer-events: none; }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-80px); } }

        /* ENERGIA & REKL√ÅM */
        .controls { padding: 0 20px; }
        .energy-bar-bg { width: 100%; height: 8px; background: #333; border-radius: 4px; overflow: hidden; margin-bottom: 5px; }
        .energy-fill { height: 100%; background: var(--accent); width: 100%; transition: width 0.2s; }
        .ad-btn { 
            background: linear-gradient(90deg, #ff0055, #ff5500); color: white; border: none; 
            padding: 12px; width: 100%; border-radius: 10px; font-weight: bold; margin-top: 10px;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }

        /* OLDALAK */
        .page { display: none; padding: 15px; height: 100vh; overflow-y: auto; padding-bottom: 120px; }
        .page.active { display: block; }

        /* K√ÅRTY√ÅK (UPGRADES) */
        .upgrade-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .upgrade-card { background: var(--card); padding: 10px; border-radius: 10px; border: 1px solid #333; text-align: center; }
        .upgrade-img { font-size: 30px; margin-bottom: 5px; }
        .upgrade-title { font-size: 13px; font-weight: bold; }
        .upgrade-cost { font-size: 11px; color: var(--gold); margin: 5px 0; }
        .upgrade-profit { font-size: 10px; color: var(--green); }
        .btn-buy { background: #333; color: white; border: 1px solid #555; padding: 5px 10px; border-radius: 5px; width: 100%; margin-top: 5px; font-size: 12px; }
        
        /* SZERENCSEKER√âK */
        .wheel-container { text-align: center; margin-top: 20px; }
        .wheel { 
            width: 250px; height: 250px; border-radius: 50%; border: 5px solid var(--gold); 
            margin: 0 auto; position: relative; overflow: hidden; 
            background: conic-gradient(#ff0055 0 25%, #00ff88 25% 50%, #3a0ca3 50% 75%, #ffcc00 75% 100%);
            transition: transform 3s ease-out;
        }
        .pointer { width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 20px solid white; position: absolute; top: 0; left: 50%; transform: translateX(-50%); z-index: 10; }
        
        /* ALS√ì MEN√ú */
        .bottom-nav { 
            position: fixed; bottom: 0; left: 0; width: 100%; background: #15151a; 
            border-top: 1px solid #333; display: flex; justify-content: space-around; padding: 10px 0 25px 0; z-index: 99;
        }
        .nav-item { text-align: center; color: #666; font-size: 10px; flex: 1; }
        .nav-item.active { color: var(--accent); }
        .nav-item i { font-size: 22px; margin-bottom: 4px; display: block; }

    </style>
</head>
<body>

    <div class="header">
        <div class="balance-box">
            <div class="balance-val">üíé <span id="balance">0</span></div>
            <div class="profit-per-hour">‚ö° <span id="pph">0</span> / √≥ra (Passz√≠v)</div>
        </div>
        <div style="background:#333; padding:5px 10px; border-radius:20px; font-size:12px;">
            <i class="fas fa-user"></i> <span id="username">User</span>
        </div>
    </div>

    <div id="page-home" class="page active">
        <div class="clicker-zone">
            <div class="main-btn" id="click-btn">üíª</div>
        </div>

        <div class="controls">
            <div style="display:flex; justify-content:space-between; font-size:12px; margin-bottom:5px;">
                <span>Energia</span>
                <span><span id="energy">1000</span>/1000</span>
            </div>
            <div class="energy-bar-bg"><div class="energy-fill" id="energy-fill"></div></div>
            
            <button class="ad-btn" onclick="watchAd()">
                <i class="fas fa-play-circle"></i> Rekl√°m n√©z√©se (+500 Energia)
            </button>
        </div>
    </div>

    <div id="page-upgrade" class="page">
        <h3 style="color:var(--accent);">Szerver Fejleszt√©sek</h3>
        <p style="font-size:12px; color:#888;">Vegy√©l eszk√∂z√∂ket, amik akkor is termelnek, ha alszol!</p>
        
        <div class="upgrade-grid">
            <div class="upgrade-card">
                <div class="upgrade-img">üê≠</div>
                <div class="upgrade-title">Alap Eg√©r</div>
                <div class="upgrade-profit">+100 / √≥ra</div>
                <div class="upgrade-cost">üí∞ 500</div>
                <button class="btn-buy" onclick="buyUpgrade('eg√©r', 500, 100)">MEGVESZ</button>
            </div>
            <div class="upgrade-card">
                <div class="upgrade-img">üñ•Ô∏è</div>
                <div class="upgrade-title">Gamer PC</div>
                <div class="upgrade-profit">+500 / √≥ra</div>
                <div class="upgrade-cost">üí∞ 2000</div>
                <button class="btn-buy" onclick="buyUpgrade('pc', 2000, 500)">MEGVESZ</button>
            </div>
            <div class="upgrade-card">
                <div class="upgrade-img">üì°</div>
                <div class="upgrade-title">Szerver Farm</div>
                <div class="upgrade-profit">+2000 / √≥ra</div>
                <div class="upgrade-cost">üí∞ 10000</div>
                <button class="btn-buy" onclick="buyUpgrade('server', 10000, 2000)">MEGVESZ</button>
            </div>
            <div class="upgrade-card">
                <div class="upgrade-img">üïµÔ∏è</div>
                <div class="upgrade-title">Hacker B√©rl√©se</div>
                <div class="upgrade-profit">+10000 / √≥ra</div>
                <div class="upgrade-cost">üí∞ 50000</div>
                <button class="btn-buy" onclick="buyUpgrade('hacker', 50000, 10000)">MEGVESZ</button>
            </div>
        </div>
    </div>

    <div id="page-casino" class="page">
        <h3 style="color:var(--gold); text-align:center;">Napi Szerencseker√©k üé∞</h3>
        <p style="text-align:center; font-size:12px; color:#aaa;">P√∂rgess naponta egyszer ingyen, vagy vegy√©l p√∂rget√©st kript√≥√©rt!</p>

        <div class="wheel-container">
            <div style="position:relative; width:250px; margin:0 auto;">
                <div class="pointer"></div>
                <div class="wheel" id="wheel"></div>
            </div>
            <button id="spin-btn" class="ad-btn" style="background:var(--gold); color:black; margin-top:20px;" onclick="spinWheel()">
                P√ñRGET√âS
            </button>
            
            <button class="ad-btn" style="background:#333; margin-top:10px; border:1px solid var(--gold);" onclick="buySpin()">
                Extra p√∂rget√©s v√©tel (0.1 LTC)
            </button>
        </div>
    </div>

    <div id="page-wallet" class="page">
        <h3 style="color:white;">P√©nz√ºgyek</h3>
        
        <div style="background:#1c1c24; padding:20px; border-radius:15px; text-align:center; border:1px solid var(--gold);">
            <div style="font-size:12px; color:#888;">BEFIZET√âS (LTC)</div>
            <p>V√°s√°rolj boostokat vagy p√∂rget√©st Litecoinnal.</p>
            
            <div style="background:black; padding:10px; font-family:monospace; color:var(--gold); word-break:break-all; font-size:11px;">
                ltc1qv5aape3pah2f954k5jjx9kgnrnkxzytm6f7an8
            </div>

            <input type="text" id="txid-input" placeholder="TXID ide..." style="width:90%; margin-top:10px; padding:10px; border-radius:5px; border:none;">
            <button class="ad-btn" style="background:var(--green); color:black;" onclick="checkPayment()">ELLEN≈êRZ√âS</button>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="nav('home', this)"><i class="fas fa-laptop-code"></i>Hacking</div>
        <div class="nav-item" onclick="nav('upgrade', this)"><i class="fas fa-server"></i>Tycoon</div>
        <div class="nav-item" onclick="nav('casino', this)"><i class="fas fa-dice"></i>Casino</div>
        <div class="nav-item" onclick="nav('wallet', this)"><i class="fas fa-wallet"></i>T√°rca</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // J√ÅT√âK √ÅLLAPOT
        let balance = localStorage.getItem('balance') ? parseInt(localStorage.getItem('balance')) : 0;
        let pph = localStorage.getItem('pph') ? parseInt(localStorage.getItem('pph')) : 0; // Profit Per Hour
        let energy = 1000;
        
        // UI elemek
        const balEl = document.getElementById('balance');
        const pphEl = document.getElementById('pph');
        const energyEl = document.getElementById('energy');
        const energyFill = document.getElementById('energy-fill');

        // Init
        const user = tg.initDataUnsafe.user;
        if(user) document.getElementById('username').innerText = user.first_name;
        updateUI();

        // PASSZ√çV J√ñVEDELEM (Minden m√°sodpercben j√∂n a p√©nz)
        setInterval(() => {
            if(pph > 0) {
                let perSec = Math.floor(pph / 3600);
                if(perSec < 1) perSec = 1; // Minimum 1 ha van pph
                balance += perSec;
                updateUI();
            }
        }, 1000);

        // ENERGIA REGEN
        setInterval(() => {
            if(energy < 1000) { energy += 2; updateEnergy(); }
        }, 1000);

        // KATTINT√ÅS
        document.getElementById('click-btn').addEventListener('click', (e) => {
            if(energy > 0) {
                balance += 1; // + kattint√°s er≈ë
                energy -= 1;
                
                showFloat(e.clientX, e.clientY);
                updateUI();
                updateEnergy();
                
                // Anim√°ci√≥
                const btn = document.getElementById('click-btn');
                btn.style.transform = "scale(0.95)";
                setTimeout(()=> btn.style.transform = "scale(1)", 100);
            }
        });

        function showFloat(x, y) {
            const el = document.createElement('div');
            el.className = 'float-num';
            el.innerText = "+1";
            el.style.left = x + 'px'; el.style.top = y + 'px';
            document.body.appendChild(el);
            setTimeout(()=> el.remove(), 800);
        }

        function updateUI() {
            balEl.innerText = balance.toLocaleString();
            pphEl.innerText = pph.toLocaleString();
            localStorage.setItem('balance', balance);
            localStorage.setItem('pph', pph);
        }

        function updateEnergy() {
            energyEl.innerText = Math.floor(energy);
            energyFill.style.width = (energy / 10) + "%";
        }

        // V√ÅS√ÅRL√ÅS (UPGRADE)
        function buyUpgrade(type, cost, profit) {
            if(balance >= cost) {
                balance -= cost;
                pph += profit;
                updateUI();
                tg.showAlert(`Sikeres v√©tel! Profitod n≈ëtt: +${profit}/√≥ra`);
            } else {
                tg.showAlert("Nincs el√©g p√©nzed! Kattints t√∂bbet vagy n√©zz rekl√°mot.");
            }
        }

        // REKL√ÅM N√âZ√âS (Szimul√°ci√≥)
        function watchAd() {
            tg.showConfirm("Megn√©zel egy rekl√°mot +500 energi√°√©rt?", (ok) => {
                if(ok) {
                    // Itt indulna a rekl√°m API
                    tg.showAlert("Rekl√°m bet√∂lt√©se... (K√©pzeld ide)");
                    setTimeout(() => {
                        energy = Math.min(energy + 500, 1000);
                        updateEnergy();
                        tg.showAlert("K√∂sz√∂nj√ºk! +500 Energia j√≥v√°√≠rva.");
                    }, 2000);
                }
            });
        }

        // SZERENCSEKER√âK
        function spinWheel() {
            const wheel = document.getElementById('wheel');
            const deg = Math.floor(5000 + Math.random() * 5000); // P√∂r√∂gj√∂n sokat
            wheel.style.transform = `rotate(${deg}deg)`;
            
            setTimeout(() => {
                const reward = Math.floor(Math.random() * 1000);
                balance += reward;
                updateUI();
                tg.showAlert(`Nyerem√©nyed: ${reward} üíé!`);
            }, 3000);
        }

        function buySpin() {
            tg.showPopup({
                title: 'Extra P√∂rget√©s',
                message: 'Utalj 0.1 LTC-t a T√°rca men√ºpontban l√©v≈ë c√≠mre!',
            });
        }

        // NAVIG√ÅCI√ì
        function nav(page, btn) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('page-' + page).classList.add('active');
            btn.classList.add('active');
        }

        // FIZET√âS ELLEN≈êRZ√âS (Backend h√≠v√°s helye)
        async function checkPayment() {
            const txid = document.getElementById('txid-input').value;
            if(txid.length > 5) {
                 // Itt h√≠vn√°d a /api/verify.js-t
                 tg.showAlert("Ellen≈ërz√©s folyamatban...");
            } else {
                tg.showAlert("Hib√°s TXID");
            }
        }
    </script>
</body>
</html>